
# 上下文与作用域

## 上下文
上下文主要有两种：全局上下文和函数上下文。每一个上下文都有一个变量对象。在这个上下文上定义的变量和函数都存在与这个对象上。在浏览器中，全局上下文就是我们说的window对象。函数上下文在其所有的代码执行完后会被销毁，但全局上下文在应用程序中退出才会销毁。当代码执行流进入函数时，该函数上下文会被推到上下文栈中，当函数执行完后。上下文栈会弹出该函数上下文，将控制权返还给之前的上下文。

## 作用域
### 类型
- 全局作用域
- 函数作用域（局部作用域）
- 块级作用域

### 概述
上下文代码在执行时，会创建变量对象的一个作用域链。上下文可以通过作用域链访问各级上下文中的变量和函数，代码正在执行的上下文中的变量对象始终位于作用域的最前端，如果该上下文是函数上下文，其活动对象用作变量对象，活动对象最初包括argument变量。作用链中的下一个变量对象来自包含上下文，然后再下一个包含上下文，直到全局上下文。所以每个上下文中的作用域链都是由后面的各级上下文中的变量对象组成的。

### 标识符搜索
标识符解析就是通过沿作用域逐级搜索标识符名称完成的

### 作用域链增强
try/catch、with都能增强作用域，try/catch是通过增加块级作用域方式并在该作用域内部定义error变量来增强。with是通过在当前作用域中增加变量来实现的

### 变量定义中的作用域链
var 定义的变量是存在最近的上下文（函数上下文/全局上下文）中。let, const 定义的变量是存在块级作用域中