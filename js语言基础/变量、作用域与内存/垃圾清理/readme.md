
# 垃圾回收
JavaScript通过自动内存管理实现内存分配和闲置资源回收

## 回收方式
现在能见到的两种回收方式一个是标记清理，另一个是引用计数。标记清理常用，大部分浏览器都采用了这种方式

### 标记清理
当声明一个变量时，这个变量会加上存在于上下文中的标记。在垃圾回收程序运行时，会标记内存中的所有变量。然后，它会将所有在上下文中的变量，以及上下文中引用的变量的标记去掉。之后所有带标记的变量都是可删除的了。随后垃圾回收程序做一次内存清理，销毁带标记的所有值并收回它们的内存

### 引用计数
当声明变量并赋给它一个引用值时，这个值的引用值为1。在后续的代码执行中。该引用值被赋予其他变量，则引用值加1，但保存该引用值的变量被赋予其他值时，该引用值减1.最终检测内存中的引用值为0则会垃圾回收程序释放收回。
这种回收方式有些问题。比如循环引用。这个两个引用值所指向的内存都不会被回收

## 优化内存
下面有几种可以优化内存管理的方式
- 当内存的赋值是临时的，使用完后将变量赋值为null
- 使用let/const缩小内存的作用域范围


## 内存泄漏
在setInterval定时器内定义变量只要定时器在运行，该内存就一直被引用，就不会被回收
闭包中定义的变量会一直引用